{% extends "base.html" %}
{% block body %}

<!-- content -->
<main class="my-5">
  <div class="container">
    <div class="row">
      <div class="list-group col-3">
        <div class="overflow-auto bg-light" style="max-width: auto; max-height:80%">
          <a class="list-group-item list-group-item-action active" aria-current="true">
            {{ curr_event["name_text"] }}
          </a>
          {% for event in data["events"] %}
            {% if event["item_id"] != curr_event["item_id"] %}
              <a href="/discussions.html?id={{ event['item_id'] }}" class="list-group-item list-group-item-action">
                {{ event["name_text"] }}
              </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>
      <div class="list-group col">
        <div class="row">
          <div id="chat" class="overflow-auto bg-light" style="max-width: auto; max-height:800px; height: 800px;">
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">List group item heading</h5>
                <small>3 days ago</small>
              </div>
              <p class="mb-1">
                Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus
                varius blandit.
              </p>
              <small>Donec id elit non mi porta.</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">List group item heading</h5>
                <small class="text-muted">3 days ago</small>
              </div>
              <p class="mb-1">
                Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus
                varius blandit.
              </p>
              <small class="text-muted">Donec id elit non mi porta.</small>
            </a>
            <a href="#" class="list-group-item list-group-item-action">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">List group item heading</h5>
                <small class="text-muted">3 days ago</small>
              </div>
              <p class="mb-1">
                Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus
                varius blandit.
              </p>
              <small class="text-muted">Donec id elit non mi porta.</small>
            </a>
          </div>
        </div>
        <div class="row">
          <div class="input-group mt-2">
            <input type="text" class="form-control" placeholder="Type Here" id="post-bar"/>
              <a class="btn btn-primary" style="background-color: #3b5998;" role="button" onclick="sendGroupMessage()"
              ><i class="fas fa-angle-right"></i></a>
          </div>
        </div>
      </div>
    </div> 
  </div>
</main> 
<!-- end content -->

{% endblock body %}

{% block script %}

{% if not_found %}

  alert("Event Not Found!!");
  window.location.href = "/home.html"

{% endif %}

function sendGroupMessage() {
  var content = $("#post-bar").val();
  if (content !== "") {
      data = {
        "action": "message", 
        "event_id": event_id, 
        "user_id": user_id, 
        "message": content
      };
      socket.send(JSON.stringify(data));
      $("#post-bar").val("");
  }
}

{% endblock script %}